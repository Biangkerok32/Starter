<html>
  <head>
    <link rel="shortcut icon" href="https://www.makeroid.tk/assets/favicon.ico">
    <title>Makeroid Starter Connection Test</title>
    <link href="vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <link href="vendor/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet" type="text/css">
    <link href="https://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic" rel="stylesheet" type="text/css">
    <link href="css/freelancer.min.css" rel="stylesheet">
  </head>

  <script type="text/javascript">
  var ping = function() {
      var xmlHttp = new XMLHttpRequest();
      xmlHttp.onreadystatechange = function() {
          if (xmlHttp.readyState == 4 && xmlHttp.status == 200) {
            var result = JSON.parse(this.response);
            if (result.status == "OK") {
                document.getElementById("status").innerHTML="<h4 id='yes'>YES, Makeroid Starter is running!</h4><br><h2>Is your phone connected via USB?</h2><h4 id='isphone'>Please Wait...</h4>";
              } else {
                document.getElementById("status").innerHTML="<style>header{background:#F44336;}hr.star-light:after{background-color:#F44336;}</style><h4 id='no'>An error occurred</h4>";
              }
          isUSB();
          return;
        } else {
          document.getElementById("status").innerHTML="<style> header{background:#F44336;}hr.star-light:after{background-color:#F44336;}</style><h4 id='no'>NO, Makeroid Starter is not running<br><br><i>Please make sure the Makeroid Statrter application is running</i></h4>";
          return;
        }
      }
      xmlHttp.open('GET', 'http://127.0.0.1:8004/ping/', true);
      xmlHttp.send();
    }
  var isUSB = function() {
      var xmlHttp = new XMLHttpRequest();
      xmlHttp.onreadystatechange = function() {
          if (xmlHttp.readyState == 4 && xmlHttp.status == 200) {
            var result = JSON.parse(this.response);
            if (result.status == "OK") {
                document.getElementById("isphone").innerHTML="<style>header{background:#4CAF50;}hr.star-light:after{background-color:#4CAF50;}</style><h4 id='yes'>YES, your phone is connected!</h4>";
              } else {
                document.getElementById("isphone").innerHTML="<style>header{background:#F44336;}hr.star-light:after{background-color:#F44336;}</style><h4 id='no'>NO, your phone is not connected via USB</h4>";
              }
        } else {
          document.getElementById("isphone").innerHTML="<style>header{background:#F44336;}hr.star-light:after{background-color:#F44336;}</style><h4 id='no'>No, your phone is not connected via USB</h4>";
          return;
        }
      }
      xmlHttp.open('GET', 'http://127.0.0.1:8004/utest/', true);
      xmlHttp.send();
    }
    window.onload = ping;
  </script>

  <body id="page-top">
    <nav style="background-color:#4527a0;" class="navbar navbar-expand-lg navbar-light fixed-top" id="mainNav">
      <div class="container">
        <a class="navbar-brand js-scroll-trigger" href="#page-top">Makeroid</a>
        <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
          Menu
          <i class="fa fa-bars"></i>
        </button>
        <div class="collapse navbar-collapse" id="navbarResponsive">
          <ul class="navbar-nav ml-auto">
            <li class="nav-item">
              <a class="nav-link js-scroll-trigger" target="_blank" href="https://www.makeroid.tk">Website</a>
            </li>
            <li class="nav-item">
              <a class="nav-link js-scroll-trigger" target="_blank" href="https://community.makeroid.tk">Community</a>
            </li>
            <li class="nav-item">
              <a class="nav-link js-scroll-trigger" target="_blank" href="https://status.makeroid.tk">Status</a>
            </li>
          </ul>
        </div>
      </div>
    </nav>
    <header style="height:100%;" class="masthead">
      <div class="container">
        <div class="intro-text">
          <h1>Makeroid Starter Connection Test</h1>
          <hr class="star-light">
          <h2>Is Makeroid Starter running?</h2>
          <h4 id="status">Please Wait...</h4>
        </div>
      </div>
    </header>
    <script src="vendor/jquery/jquery.min.js"></script>
    <script src="vendor/popper/popper.min.js"></script>
    <script src="vendor/bootstrap/js/bootstrap.min.js"></script>
    <script src="vendor/jquery-easing/jquery.easing.min.js"></script>
    <script src="js/jqBootstrapValidation.js"></script>
    <script src="js/contact_me.js"></script>
    <script src="js/freelancer.min.js"></script>
  </body>
</html>
